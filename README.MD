QUICK START
=======================
1. Скачать/клонировать модуль. Поместить в local/modules проекта
2. Установить модуль через административную часть портала. Для работы модуля необходим предварительно установленный модуль [sprint.migration](https://marketplace.1c-bitrix.ru/solutions/sprint.migration/). Будет создан смарт процесс с тестовыми полями. WARNING!!! Нет отката миграции создания смарт процесса.
3. Если какие-то миграции не установились - доустановить в админке
4. /crm/type/ - найти тут в списке созданный смарт процесс - "Заявки на подбор"


Общая информация
=======================
Для миграций смарт процессов реализован модуль agapov.smart_proccess.
Модуль позволяет создавать смарт-процессы со стадиями. Также, разобравшись в массиве настроек agapov.smart_proccess/lib/Helper/SmartProcessMigration.php в getProcessSettings
можно дополнить функционал всеми возможностями создания через интерфейс bitrix24.
При запуске миграции будет создаваться файл const.php в корне модуля, куда записываются ID сущностей. Пример констант созданного смарт процесса приведён ниже.

```
<?php
// Заявка на подбор
const SELECTION_REQUEST_ENTITY_ID = 5;
const SELECTION_REQUEST_ENTITY_TYPE_ID = 183;
const SELECTION_REQUEST_CATEGORY_ID = 5;
```

Данные генерируются случайно в определённых диапазонах.
Бывает, что при большом количестве смарт процессов новые миграции накатываются с ошибками, возникает это из-за того, что внутренние механизмы создания ID делают это вы диапазоне без проверки на занятость ID.
Необходимо делать накат, пока не накатится

Представлены в модуле
=======================
1. Миграция создания смарт процесса Smart_process_1.php
2. Миграция создания полей смарт процесса Smart_process_2.php
3. Миграция создания отображения полей смарт процесса Smart_process_3.php
4. Класс для работы со смарт процессами - SmartProcessDataManager
5. Класс-помощник для создания смарт процессов SmartProcessMigration
6. Класс для работы со стадиями смарт процесса - SelectionRequest

Пример работы со смарт процессом
=======================
```
$obj = new SmartProcessDataManager(SELECTION_REQUEST_ENTITY_TYPE_ID);
$obj->update($arFields['ID'], ['UF_END_DATE' => new DateTime()]);
```

